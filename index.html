<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex, nofollow" />
    <title>Track time</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" >
    <link rel="stylesheet" href="/bot.css" >
</head>
<body style="display: none;" data-bind="visible: true">

<form id="editHoursForm" data-bind="submit: $root.updateTrackTime">
    <div data-bind="if: $root.editMode">
        <div class="hours-editor">
            <input id="editHoursInput" data-bind="attr: { placeholder: $root.editHours, disabled: $root.saveInProgress }, textInput: trackHours"  type="number" inputmode="numeric">
            <label for="editHoursInput" data-bind="text: $data.editorTaskName"></label>
            <div class="progress" data-bind="visible: $root.saveInProgress">
                <div class="indeterminate"></div>
            </div>
            <div class="editor-actions" >
                <a class="waves-effect waves-light btn-large btn-editor btn-ok" data-bind="click: $root.updateTrackTime, attr: {disabled: $root.saveInProgress}">Примінити</a>
                <a class="waves-effect waves-light btn-large btn-editor btn-cancel" data-bind="click: $root.closeEditHours, attr: {disabled: $root.saveInProgress}">Не приміняти</a>
            </div>
        </div>
    </div>
</form>

<div data-bind="ifnot: $root.editMode">
    <div data-bind="foreach: months" class="calendar-wrapper">
        <div class="month-title">
            <div>
                <span data-bind="text: $data.month"></span>&nbsp<span class="month-title-track" data-bind="text: $data.track"></span>
            </div>
            <div>
            <div data-bind="click: $root.changeMode, if: $root.calendarMode">
                <a class="waves-effect waves-light btn menu-button pulse"><i class="material-icons menu-icon">menu</i></a>
            </div>
            <div data-bind="click: $root.changeMode, ifnot: $root.calendarMode">
                <a class="waves-effect waves-light btn menu-button"><i class="material-icons menu-icon">apps</i></a>
            </div>
            </div>
        </div>
        <div data-bind="if: $root.calendarMode">
            <div data-bind="foreach: $data.days" class="calendar-wrapper">
                <div data-bind="foreach: $data" class="calendar-week">
                    <div class="calendar-day waves-effect waves-green"
                         data-bind="click: $root.moveToDay, css: {weekend: $data.isWeekend}">
                        <div class="calendar-day-date">
                            <div class="calendar-day-date-text" data-bind="text: $data.shortDate"></div>
                        </div>
                        <div class="tracked-time" data-bind="text: $data.trackedTime"></div>
                    </div>
                </div>
            </div>
        </div>

        <div data-bind="ifnot: $root.calendarMode" class="tracks-wrapper">
            <div data-bind="foreach: $data.tracks">
                <div class="day-title" data-bind="attr: { id: 'DAY_' + $data.day }">
                    <div>
                        <span data-bind="text: $data.day"></span>&nbsp( <span data-bind="text: $data.sum"></span> / 8 )
                    </div>
                </div>
                <div data-bind="foreach: $data.tracks">
                    <div>
                        <div class="time-track">
                            <div class="col m12">
                                <div class="card blue-grey darken-1">
                                    <div class="white-text issue-project-name-wrapper">
                                        <span class="issue-project-name" data-bind="text: $data.name"></span>
                                    </div>
                                    <div class="card-content white-text issue-subject">
                                        <p data-bind="text: $data.subject"></p>
                                    </div>
                                    <div class="card-action issue-actions">
                                        <a href="javascript:void(0)" class="issue-actions-item" data-bind="click: $root.openEditOrders">
                                            <div>
                                                <span class="issue-order-name" data-bind="text: $data.orderName"></span>
                                                <span class="issue-order-name">
                                                    <i class="material-icons menu-icon">edit</i>
                                                </span>
                                            </div>
                                        </a>
                                        <a href="javascript:void(0)" class="issue-actions-item" data-bind="click: $root.openEditHours">
                                            <div>
                                                <span class="issue-hours" data-bind="text: $data.hours"></span>
                                                <span class="issue-hours">
                                                    <i class="material-icons menu-icon">edit</i>
                                                </span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://tg.dev/js/telegram-web-app.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-joda/1.7.1/js-joda.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@js-joda/locale_en@4.7.0/dist/index.min.js"></script>
<script src="/bot.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>

